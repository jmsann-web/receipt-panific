<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panific POS Receipt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap');
        
        body { font-family: 'Helvetica', 'Arial', sans-serif; }

        /* The Receipt Container */
        #receipt-wrap {
            width: 380px;
            background-color: white;
            padding: 20px;
            margin: 0 auto;
        }

        .signature-font { font-family: 'Dancing Script', cursive; }
        
        /* Input styling to look clean on PDF */
        input, select { 
            border: none;
            border-bottom: 1px solid #f3f4f6;
            outline: none;
            width: 100%;
            padding: 2px 0;
        }
        
        /* Remove arrows from number input */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

        @media print { .no-print { display: none; } }
    </style>
</head>
<body class="bg-zinc-200 py-10">

    <div class="max-w-[420px] mx-auto bg-white shadow-2xl rounded-xl overflow-hidden">
        
        <div id="receipt-wrap">
            <div class="text-center border-b-2 border-double border-gray-200 pb-4 mb-4">
                <img src="panific.logo.png" alt="Panific Logo" class="w-48 mx-auto mb-2 object-contain">
                <p class="text-[11px] font-bold">Accra, Ghana</p>
                <p class="text-[11px]">info@panific.com</p>
                <div class="text-[14px] font-black mt-3 tracking-widest uppercase border-y border-black py-1">
                    Sales Receipt
                </div>
            </div>

            <div class="space-y-3 text-[13px]">
                <div class="flex justify-between items-center">
                    <span class="font-bold">DATE:</span>
                    <input type="date" id="current-date" class="text-right font-bold !w-32">
                </div>
                <div class="flex justify-between">
                    <span class="font-bold">RECEIPT NO:</span>
                    <input type="text" id="receipt-no" class="text-right font-bold !w-32">
                </div>

                <div class="pt-2">
                    <label class="block text-[10px] text-gray-400 font-bold uppercase">Customer Name</label>
                    <input type="text" id="cust-name" class="font-bold text-gray-800" placeholder="Enter Name">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-[10px] text-gray-400 font-bold uppercase">Amount (GHâ‚µ)</label>
                        <input type="number" id="amt-num" class="text-lg font-black text-blue-700" placeholder="0.00">
                    </div>
                    <div>
                        <label class="block text-[10px] text-gray-400 font-bold uppercase">Payment Type</label>
                        <select id="pay-type" class="font-bold text-gray-700 h-[34px]" onchange="toggleCheque(this.value)">
                            <option value="MOMO">MOMO</option>
                            <option value="CASH">CASH</option>
                            <option value="CHEQUE">CHEQUE</option>
                        </select>
                    </div>
                </div>

                <div id="cheque-field" class="hidden animate-pulse">
                    <label class="block text-[10px] text-gray-400 font-bold uppercase">Cheque Number</label>
                    <input type="text" id="cheque-no" class="font-bold text-gray-800" placeholder="Ref #">
                </div>

                <div class="bg-gray-50 p-2 rounded">
                    <label class="block text-[9px] text-gray-400 font-bold uppercase">Amount in Words</label>
                    <p id="amt-words" class="text-[11px] italic font-medium leading-tight text-gray-700 break-words">Zero Ghana Cedis</p>
                </div>

                <div class="pt-2">
                    <label class="block text-[10px] text-gray-400 font-bold uppercase">Salesperson</label>
                    <input type="text" id="sales-name" class="text-xs" placeholder="Type name for signature" oninput="updateSig(this.value)">
                </div>

                <div class="pt-8 text-center">
                    <div class="inline-block">
                        <p id="sig-display" class="signature-font text-2xl text-gray-800 leading-none">Sales Staff</p>
                        <div class="w-40 h-[1px] bg-black mt-1"></div>
                        <p class="text-[9px] uppercase font-bold mt-1">Authorized Signature</p>
                    </div>
                    
                    <div class="mt-8 pt-4 border-t border-gray-100">
                        <p class="text-[11px] font-bold text-gray-800">Your partner for premium F&B brands</p>
                        <p class="text-[10px] text-gray-400 mt-1">Thank you for your patronage!</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="p-6 bg-zinc-900 space-y-3 no-print">
            <button onclick="generatePDF()" class="w-full bg-white text-black py-4 rounded-lg font-bold uppercase text-xs tracking-widest hover:bg-gray-100 transition shadow-lg">
                Download & Share PDF
            </button>
        </div>
    </div>

    <script>
        // Set Defaults
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('current-date').value = today;
        document.getElementById('receipt-no').value = 'PN-' + Math.floor(100000 + Math.random() * 900000);

        function toggleCheque(val) {
            document.getElementById('cheque-field').style.display = (val === 'CHEQUE') ? 'block' : 'none';
        }

        function updateSig(val) {
            document.getElementById('sig-display').innerText = val || "Sales Staff";
        }

        function numToWords(num) {
            const a = ['', 'One ', 'Two ', 'Three ', 'Four ', 'Five ', 'Six ', 'Seven ', 'Eight ', 'Nine ', 'Ten ', 'Eleven ', 'Twelve ', 'Thirteen ', 'Fourteen ', 'Fifteen ', 'Sixteen ', 'Seventeen ', 'Eighteen ', 'Nineteen '];
            const b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];

            function makeWords(n) {
                if (n < 20) return a[n];
                if (n < 100) return b[Math.floor(n / 10)] + (n % 10 !== 0 ? ' ' + a[n % 10] : '');
                if (n < 1000) return a[Math.floor(n / 100)] + 'Hundred ' + (n % 100 !== 0 ? 'and ' + makeWords(n % 100) : '');
                if (n < 1000000) return makeWords(Math.floor(n / 1000)) + 'Thousand ' + (n % 1000 !== 0 ? makeWords(n % 1000) : '');
                return makeWords(Math.floor(n / 1000000)) + 'Million ' + (n % 1000000 !== 0 ? makeWords(n % 1000000) : '');
            }

            const val = Math.floor(num);
            if (val === 0) return "Zero Ghana Cedis";
            return (makeWords(val) + "Ghana Cedis").replace(/\s+/g, ' ').trim();
        }

        document.getElementById('amt-num').addEventListener('input', (e) => {
            document.getElementById('amt-words').innerText = numToWords(e.target.value || 0);
        });

        function generatePDF() {
            const element = document.getElementById('receipt-wrap');
            const customer = document.getElementById('cust-name').value || 'Customer';
            
            // PDF formatting fixed to prevent text bleed and cutting
            const opt = {
                margin: [10, 0, 10, 0], // Top, Left, Bottom, Right
                filename: `Panific_${customer}_Receipt.pdf`,
                image: { type: 'jpeg', quality: 1 },
                html2canvas: { 
                    scale: 2, 
                    useCORS: true,
                    logging: false,
                    letterRendering: true
                },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' } 
            };

            // Using A4 container with centered content ensures no content is "out of layout"
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
