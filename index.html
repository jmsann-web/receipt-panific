<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panific POS Receipt</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&display=swap');
        
        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
        }

        #receipt-content {
            width: 380px;
            color: #000;
            line-height: 1.4;
            background-color: white;
        }

        .signature-font { font-family: 'Dancing Script', cursive; }
        input, select { background: transparent; border-radius: 0; }
        
        /* Ensures PDF captures the full height */
        .pdf-container {
            width: 380px;
            margin: 0 auto;
        }
    </style>
</head>
<body class="bg-zinc-100 flex flex-col items-center py-6 min-h-screen">

    <div class="bg-white shadow-2xl rounded-lg overflow-hidden w-[400px] mb-10 no-print">
        <div id="receipt-content" class="p-8 mx-auto">
            <div class="text-center border-b border-dashed border-gray-400 pb-4 mb-4">
                <img src="panific.logo.png" alt="Panific Logo" class="w-48 mx-auto mb-3 object-contain">
                <p class="text-[11px] font-bold uppercase">Accra, Ghana</p>
                <p class="text-[11px]">info@panific.com</p>
                <p class="text-[11px] mt-2">------------------------------------------</p>
                <p class="text-sm font-bold mt-1 tracking-widest uppercase">Sales Receipt</p>
            </div>

            <div class="space-y-4 text-[13px]">
                <div class="flex justify-between">
                    <span>DATE:</span>
                    <span id="current-date" class="font-bold border-b border-gray-100"></span>
                </div>
                <div class="flex justify-between">
                    <span>RECEIPT NO:</span>
                    <span id="receipt-no" class="font-bold border-b border-gray-100"></span>
                </div>

                <div class="pt-2">
                    <label class="block text-[10px] text-gray-500 font-bold uppercase">Customer Name</label>
                    <input type="text" id="cust-name" class="w-full border-b border-gray-200 py-1 outline-none font-bold" placeholder="Required">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-[10px] text-gray-500 font-bold uppercase">Amount (GHâ‚µ)</label>
                        <input type="number" id="amt-num" class="w-full text-lg font-bold border-b border-gray-200 py-1 outline-none" placeholder="0.00">
                    </div>
                    <div>
                        <label class="block text-[10px] text-gray-500 font-bold uppercase">Payment Type</label>
                        <select id="pay-type" class="w-full text-sm font-bold border-b border-gray-200 py-2 outline-none" onchange="toggleCheque(this.value)">
                            <option value="MOMO">MOMO</option>
                            <option value="CASH">CASH</option>
                            <option value="CHEQUE">CHEQUE</option>
                        </select>
                    </div>
                </div>

                <div id="cheque-field" class="hidden">
                    <label class="block text-[10px] text-gray-500 font-bold uppercase">Cheque Number</label>
                    <input type="text" id="cheque-no" class="w-full border-b border-gray-200 py-1 outline-none font-bold" placeholder="Enter Cheque #">
                </div>

                <div>
                    <label class="block text-[10px] text-gray-500 font-bold uppercase">Amount in Words</label>
                    <p id="amt-words" class="text-[11px] italic leading-tight mt-1 text-gray-800 min-h-[30px] border-b border-gray-50 pb-1">Zero Ghana Cedis</p>
                </div>

                <div class="pt-2">
                    <label class="block text-[10px] text-gray-500 font-bold uppercase">Salesperson Name</label>
                    <input type="text" id="sales-name" class="w-full border-b border-gray-200 py-1 outline-none text-xs" placeholder="Your Name" oninput="updateSignature(this.value)">
                </div>

                <div class="pt-8 flex flex-col items-center">
                    <div class="text-center w-full">
                        <p id="sig-display" class="signature-font text-2xl mb-0 text-zinc-800">Sales Staff</p>
                        <div class="w-32 h-[1px] bg-black mx-auto"></div>
                        <p class="text-[10px] uppercase font-bold mt-1">Authorized Signature</p>
                    </div>
                    <p class="text-[10px] mt-8 font-bold italic">*** Quality You Can Taste ***</p>
                </div>
            </div>
        </div>

        <div class="p-6 bg-zinc-50 border-t border-zinc-200 flex flex-col gap-3">
            <button onclick="generatePOS()" class="w-full bg-zinc-900 text-white py-4 rounded-xl font-bold uppercase text-xs tracking-widest active:scale-95 transition-all">
                Download & Share PDF
            </button>
            <button onclick="window.location.reload()" class="w-full text-zinc-400 text-[10px] uppercase tracking-widest font-bold">
                Clear & Reset
            </button>
        </div>
    </div>

    <script>
        document.getElementById('current-date').innerText = new Date().toLocaleDateString('en-GB');
        document.getElementById('receipt-no').innerText = 'PN-' + Math.floor(100000 + Math.random() * 900000);

        function toggleCheque(val) {
            const field = document.getElementById('cheque-field');
            val === 'CHEQUE' ? field.classList.remove('hidden') : field.classList.add('hidden');
        }

        function updateSignature(val) {
            document.getElementById('sig-display').innerText = val || "Sales Staff";
        }

        // Expanded Amount to Words Logic (Handles up to 999,999,999)
        function numToWords(num) {
            const a = ['', 'One ', 'Two ', 'Three ', 'Four ', 'Five ', 'Six ', 'Seven ', 'Eight ', 'Nine ', 'Ten ', 'Eleven ', 'Twelve ', 'Thirteen ', 'Fourteen ', 'Fifteen ', 'Sixteen ', 'Seventeen ', 'Eighteen ', 'Nineteen '];
            const b = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];

            function makeWords(n) {
                if (n < 20) return a[n];
                if (n < 100) return b[Math.floor(n / 10)] + (n % 10 !== 0 ? ' ' + a[n % 10] : '');
                if (n < 1000) return a[Math.floor(n / 100)] + 'Hundred ' + (n % 100 !== 0 ? 'and ' + makeWords(n % 100) : '');
                if (n < 1000000) return makeWords(Math.floor(n / 1000)) + 'Thousand ' + (n % 1000 !== 0 ? makeWords(n % 1000) : '');
                return makeWords(Math.floor(n / 1000000)) + 'Million ' + (n % 1000000 !== 0 ? makeWords(n % 1000000) : '');
            }

            const val = Math.floor(num);
            if (val === 0) return "Zero Ghana Cedis";
            return (makeWords(val) + "Ghana Cedis").replace(/\s+/g, ' ').trim();
        }

        document.getElementById('amt-num').addEventListener('input', (e) => {
            document.getElementById('amt-words').innerText = numToWords(e.target.value || 0);
        });

        function generatePOS() {
            const element = document.getElementById('receipt-content');
            const customer = document.getElementById('cust-name').value || 'Customer';
            
            // Adjusting options for better resolution and full-content capture
            const opt = {
                margin: 0,
                filename: `Panific_${customer}.pdf`,
                image: { type: 'jpeg', quality: 1.0 },
                html2canvas: { 
                    scale: 3, 
                    useCORS: true, 
                    letterRendering: true,
                    windowWidth: 380
                },
                jsPDF: { unit: 'mm', format: [80, 180], orientation: 'portrait' } 
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
